# Core product types
type EnrichedProduct {
  sku: String!
  name: String
  price: Float
  type_id: String
  url_key: String
  inventory: ProductInventory!
  categories: [ProductCategory!]!
  media_gallery_entries: [MediaGalleryEntry!]!
  custom_attributes: [CustomAttribute]
}

type ProductCategory {
  id: Int
  name: String
}

type MediaGalleryEntry {
  file: String
  url: String
  types: [String]
}

type ProductInventory {
  quantity: Int!
}

type CustomAttribute {
  attribute_code: String
  value: JSON
}

# Response wrappers
type EnrichedProductsResponse {
  products: [EnrichedProduct]
  total_count: Int
  performance: PerformanceMetrics
}

# Performance tracking
type PerformanceMetrics {
  method: String
  productCount: Int
  executionTime: Int
  apiCalls: Int  # For Mesh: operation count, For REST: actual API calls
  dataSourcesUnified: Int
  productsApiCalls: Int  # For Mesh: operations, For REST: API calls
  categoriesApiCalls: Int
  inventoryApiCalls: Int
}

# Query extensions
extend type Query {
  mesh_products_enriched(pageSize: Int, currentPage: Int): EnrichedProductsResponse
}